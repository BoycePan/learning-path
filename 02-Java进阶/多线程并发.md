# Javaå¤šçº¿ç¨‹ä¸å¹¶å‘ç¼–ç¨‹

## ğŸ“Œ å­¦ä¹ ç›®æ ‡

- ç†è§£çº¿ç¨‹çš„æ¦‚å¿µå’Œç”Ÿå‘½å‘¨æœŸ
- æŒæ¡å¤šçº¿ç¨‹åˆ›å»ºå’Œä½¿ç”¨
- ç†è§£çº¿ç¨‹åŒæ­¥å’Œé”æœºåˆ¶
- æŒæ¡Javaå¹¶å‘å·¥å…·ç±»
- äº†è§£çº¿ç¨‹æ± çš„ä½¿ç”¨

## â­ æ ¸å¿ƒæ¦‚å¿µ

- **è¿›ç¨‹**ï¼šç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œï¼Œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½
- **çº¿ç¨‹**ï¼šè¿›ç¨‹å†…çš„æ‰§è¡Œå•å…ƒï¼ŒCPUè°ƒåº¦çš„åŸºæœ¬å•ä½ â­â­â­â­â­
- **å¹¶å‘**ï¼šå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œ
- **å¹¶è¡Œ**ï¼šå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œ

## 1. çº¿ç¨‹åˆ›å»º â­â­â­â­â­

### æ–¹å¼1ï¼šç»§æ‰¿Threadç±»

```java
/**
 * ç»§æ‰¿Threadç±» â­â­â­â­
 */
class MyThread extends Thread {
    private String threadName;
    
    public MyThread(String name) {
        this.threadName = name;
    }
    
    @Override
    public void run() {
        // çº¿ç¨‹æ‰§è¡Œçš„ä»£ç 
        for (int i = 1; i <= 5; i++) {
            System.out.println(threadName + " - " + i);
            try {
                Thread.sleep(500);  // ä¼‘çœ 500æ¯«ç§’
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

public class ThreadDemo1 {
    public static void main(String[] args) {
        // åˆ›å»ºçº¿ç¨‹å¯¹è±¡
        MyThread thread1 = new MyThread("çº¿ç¨‹1");
        MyThread thread2 = new MyThread("çº¿ç¨‹2");
        
        // å¯åŠ¨çº¿ç¨‹ â­â­â­â­â­
        thread1.start();  // æ³¨æ„ï¼šä¸æ˜¯run()
        thread2.start();
        
        System.out.println("ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ");
    }
}
```

### æ–¹å¼2ï¼šå®ç°Runnableæ¥å£ï¼ˆæ¨èï¼‰â­â­â­â­â­

```java
/**
 * å®ç°Runnableæ¥å£ï¼ˆæ¨èï¼‰ â­â­â­â­â­
 * ä¼˜ç‚¹ï¼š
 * 1. é¿å…Javaå•ç»§æ‰¿çš„é™åˆ¶
 * 2. ä»£ç å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å…±äº«
 * 3. æ›´ç¬¦åˆé¢å‘å¯¹è±¡æ€æƒ³
 */
class MyRunnable implements Runnable {
    private String taskName;
    
    public MyRunnable(String name) {
        this.taskName = name;
    }
    
    @Override
    public void run() {
        for (int i = 1; i <= 5; i++) {
            System.out.println(taskName + " - " + i + 
                " (çº¿ç¨‹ï¼š" + Thread.currentThread().getName() + ")");
            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

public class RunnableDemo {
    public static void main(String[] args) {
        // åˆ›å»ºRunnableå¯¹è±¡
        MyRunnable task = new MyRunnable("ä»»åŠ¡A");
        
        // åˆ›å»ºçº¿ç¨‹
        Thread thread1 = new Thread(task, "å·¥ä½œçº¿ç¨‹1");
        Thread thread2 = new Thread(task, "å·¥ä½œçº¿ç¨‹2");
        
        thread1.start();
        thread2.start();
    }
}
```

### æ–¹å¼3ï¼šLambdaè¡¨è¾¾å¼ï¼ˆç°ä»£å†™æ³•ï¼‰â­â­â­â­â­

```java
public class LambdaThreadDemo {
    public static void main(String[] args) {
        // Lambdaæ–¹å¼åˆ›å»ºçº¿ç¨‹ï¼ˆæ¨èï¼‰ â­â­â­â­â­
        Thread thread1 = new Thread(() -> {
            for (int i = 1; i <= 5; i++) {
                System.out.println("Lambdaçº¿ç¨‹ - " + i);
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });
        
        thread1.start();
        
        // æ›´ç®€æ´çš„å†™æ³•
        new Thread(() -> System.out.println("ç®€å•ä»»åŠ¡")).start();
    }
}
```

### æ–¹å¼4ï¼šCallableæ¥å£ï¼ˆæœ‰è¿”å›å€¼ï¼‰â­â­â­â­â­

```java
import java.util.concurrent.*;

/**
 * Callable - æœ‰è¿”å›å€¼çš„çº¿ç¨‹ â­â­â­â­â­
 */
class MyCallable implements Callable<Integer> {
    private int number;
    
    public MyCallable(int number) {
        this.number = number;
    }
    
    @Override
    public Integer call() throws Exception {
        int sum = 0;
        for (int i = 1; i <= number; i++) {
            sum += i;
            Thread.sleep(100);
        }
        return sum;
    }
}

public class CallableDemo {
    public static void main(String[] args) {
        // åˆ›å»ºCallableä»»åŠ¡
        MyCallable task1 = new MyCallable(100);
        MyCallable task2 = new MyCallable(50);
        
        // åˆ›å»ºFutureTask
        FutureTask<Integer> future1 = new FutureTask<>(task1);
        FutureTask<Integer> future2 = new FutureTask<>(task2);
        
        // å¯åŠ¨çº¿ç¨‹
        new Thread(future1).start();
        new Thread(future2).start();
        
        try {
            // è·å–è¿”å›ç»“æœï¼ˆä¼šé˜»å¡ï¼‰ â­â­â­â­â­
            Integer result1 = future1.get();
            Integer result2 = future2.get();
            
            System.out.println("ä»»åŠ¡1ç»“æœï¼š" + result1);
            System.out.println("ä»»åŠ¡2ç»“æœï¼š" + result2);
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
    }
}
```

## 2. çº¿ç¨‹çŠ¶æ€ä¸æ§åˆ¶ â­â­â­â­â­

### çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ

```
æ–°å»º(NEW)
   â†“ start()
å°±ç»ª(RUNNABLE) â†â†’ è¿è¡Œ(RUNNING)
   â†“ sleep/wait/join
é˜»å¡(BLOCKED/WAITING/TIMED_WAITING)
   â†“ æ‰§è¡Œå®Œæˆ
æ­»äº¡(TERMINATED)
```

### çº¿ç¨‹å¸¸ç”¨æ–¹æ³•

```java
public class ThreadMethodsDemo {
    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(() -> {
            for (int i = 1; i <= 10; i++) {
                System.out.println("å­çº¿ç¨‹ - " + i);
                try {
                    Thread.sleep(1000);  // ä¼‘çœ 1ç§’ â­â­â­â­â­
                } catch (InterruptedException e) {
                    System.out.println("çº¿ç¨‹è¢«ä¸­æ–­");
                    return;
                }
            }
        });
        
        // è®¾ç½®çº¿ç¨‹åç§° â­â­â­â­
        thread.setName("å·¥ä½œçº¿ç¨‹");
        
        // è®¾ç½®ä¼˜å…ˆçº§ï¼ˆ1-10ï¼Œé»˜è®¤5ï¼‰ â­â­â­
        thread.setPriority(Thread.MAX_PRIORITY);
        
        // è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ â­â­â­â­
        thread.setDaemon(true);  // å¿…é¡»åœ¨start()ä¹‹å‰è°ƒç”¨
        
        thread.start();
        
        // è·å–å½“å‰çº¿ç¨‹ â­â­â­â­â­
        Thread currentThread = Thread.currentThread();
        System.out.println("å½“å‰çº¿ç¨‹ï¼š" + currentThread.getName());
        
        // ç­‰å¾…çº¿ç¨‹ç»“æŸ â­â­â­â­â­
        thread.join();  // ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»“æŸ
        
        // æ£€æŸ¥çº¿ç¨‹çŠ¶æ€ â­â­â­â­
        System.out.println("çº¿ç¨‹æ˜¯å¦å­˜æ´»ï¼š" + thread.isAlive());
        System.out.println("çº¿ç¨‹çŠ¶æ€ï¼š" + thread.getState());
        
        // ä¸­æ–­çº¿ç¨‹ â­â­â­â­
        // thread.interrupt();
    }
}
```

## 3. çº¿ç¨‹åŒæ­¥ â­â­â­â­â­

### synchronizedå…³é”®å­— â­â­â­â­â­

```java
/**
 * çº¿ç¨‹å®‰å…¨é—®é¢˜ç¤ºä¾‹ï¼šé“¶è¡Œè´¦æˆ·
 */
class BankAccount {
    private int balance = 1000;
    
    // æ–¹å¼1ï¼šåŒæ­¥æ–¹æ³• â­â­â­â­â­
    public synchronized void withdraw(int amount) {
        if (balance >= amount) {
            System.out.println(Thread.currentThread().getName() + 
                " å‡†å¤‡å–æ¬¾ï¼š" + amount);
            balance -= amount;
            System.out.println(Thread.currentThread().getName() + 
                " å–æ¬¾æˆåŠŸï¼Œä½™é¢ï¼š" + balance);
        } else {
            System.out.println(Thread.currentThread().getName() + 
                " ä½™é¢ä¸è¶³");
        }
    }
    
    // æ–¹å¼2ï¼šåŒæ­¥ä»£ç å— â­â­â­â­â­
    public void deposit(int amount) {
        synchronized (this) {
            balance += amount;
            System.out.println(Thread.currentThread().getName() + 
                " å­˜æ¬¾ï¼š" + amount + "ï¼Œä½™é¢ï¼š" + balance);
        }
    }
    
    public int getBalance() {
        return balance;
    }
}

public class SynchronizedDemo {
    public static void main(String[] args) {
        BankAccount account = new BankAccount();
        
        // åˆ›å»ºå¤šä¸ªçº¿ç¨‹åŒæ—¶å–æ¬¾
        Runnable task = () -> {
            for (int i = 0; i < 3; i++) {
                account.withdraw(200);
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };
        
        Thread t1 = new Thread(task, "å¼ ä¸‰");
        Thread t2 = new Thread(task, "æå››");
        Thread t3 = new Thread(task, "ç‹äº”");
        
        t1.start();
        t2.start();
        t3.start();
    }
}
```

### Lockæ¥å£ï¼ˆæ¨èï¼‰â­â­â­â­â­

```java
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

/**
 * ä½¿ç”¨Lockæ¥å£ â­â­â­â­â­
 * ä¼˜ç‚¹ï¼š
 * 1. å¯ä»¥å°è¯•è·å–é”
 * 2. å¯ä»¥è®¾ç½®è¶…æ—¶
 * 3. å¯ä»¥ä¸­æ–­
 * 4. æ›´çµæ´»
 */
class TicketOffice {
    private int tickets = 100;
    private Lock lock = new ReentrantLock();  // å¯é‡å…¥é”
    
    public void sellTicket() {
        lock.lock();  // è·å–é”
        try {
            if (tickets > 0) {
                System.out.println(Thread.currentThread().getName() + 
                    " å”®å‡ºç¬¬ " + tickets + " å¼ ç¥¨");
                tickets--;
            }
        } finally {
            lock.unlock();  // é‡Šæ”¾é”ï¼ˆå¿…é¡»åœ¨finallyä¸­ï¼‰ â­â­â­â­â­
        }
    }
    
    // å°è¯•è·å–é” â­â­â­â­
    public void tryLock() {
        if (lock.tryLock()) {
            try {
                System.out.println(Thread.currentThread().getName() + 
                    " è·å–åˆ°é”");
                // æ‰§è¡Œä¸šåŠ¡é€»è¾‘
            } finally {
                lock.unlock();
            }
        } else {
            System.out.println(Thread.currentThread().getName() + 
                " æœªè·å–åˆ°é”");
        }
    }
}

public class LockDemo {
    public static void main(String[] args) {
        TicketOffice office = new TicketOffice();
        
        // åˆ›å»ºå¤šä¸ªå”®ç¥¨çª—å£
        for (int i = 1; i <= 5; i++) {
            new Thread(() -> {
                for (int j = 0; j < 25; j++) {
                    office.sellTicket();
                    try {
                        Thread.sleep(10);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }, "çª—å£" + i).start();
        }
    }
}
```

## 4. çº¿ç¨‹é€šä¿¡ â­â­â­â­â­

### wait()å’Œnotify() â­â­â­â­

```java
/**
 * ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ â­â­â­â­â­
 */
class SharedResource {
    private int product = 0;
    private final int MAX = 10;
    
    // ç”Ÿäº§
    public synchronized void produce() {
        while (product >= MAX) {
            try {
                System.out.println("ä»“åº“å·²æ»¡ï¼Œç”Ÿäº§è€…ç­‰å¾…...");
                wait();  // ç­‰å¾… â­â­â­â­â­
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        
        product++;
        System.out.println("ç”Ÿäº§è€…ç”Ÿäº§ï¼Œå½“å‰æ•°é‡ï¼š" + product);
        notifyAll();  // å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ â­â­â­â­â­
    }
    
    // æ¶ˆè´¹
    public synchronized void consume() {
        while (product <= 0) {
            try {
                System.out.println("ä»“åº“ä¸ºç©ºï¼Œæ¶ˆè´¹è€…ç­‰å¾…...");
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        
        product--;
        System.out.println("æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå½“å‰æ•°é‡ï¼š" + product);
        notifyAll();
    }
}

public class ProducerConsumerDemo {
    public static void main(String[] args) {
        SharedResource resource = new SharedResource();
        
        // ç”Ÿäº§è€…çº¿ç¨‹
        new Thread(() -> {
            for (int i = 0; i < 20; i++) {
                resource.produce();
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }, "ç”Ÿäº§è€…").start();
        
        // æ¶ˆè´¹è€…çº¿ç¨‹
        new Thread(() -> {
            for (int i = 0; i < 20; i++) {
                resource.consume();
                try {
                    Thread.sleep(150);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }, "æ¶ˆè´¹è€…").start();
    }
}
```

## 5. çº¿ç¨‹æ±  â­â­â­â­â­

### Executorså·¥å…·ç±»

```java
import java.util.concurrent.*;

public class ThreadPoolDemo {
    public static void main(String[] args) {
        // 1. å›ºå®šå¤§å°çº¿ç¨‹æ±  â­â­â­â­â­
        ExecutorService fixedPool = Executors.newFixedThreadPool(3);
        
        // 2. ç¼“å­˜çº¿ç¨‹æ±  â­â­â­â­
        ExecutorService cachedPool = Executors.newCachedThreadPool();
        
        // 3. å•çº¿ç¨‹æ±  â­â­â­
        ExecutorService singlePool = Executors.newSingleThreadExecutor();
        
        // 4. å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ±  â­â­â­â­
        ScheduledExecutorService scheduledPool = 
            Executors.newScheduledThreadPool(2);
        
        // ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡ â­â­â­â­â­
        for (int i = 1; i <= 10; i++) {
            final int taskId = i;
            fixedPool.execute(() -> {
                System.out.println("ä»»åŠ¡" + taskId + " ç”± " + 
                    Thread.currentThread().getName() + " æ‰§è¡Œ");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            });
        }
        
        // æäº¤æœ‰è¿”å›å€¼çš„ä»»åŠ¡ â­â­â­â­â­
        Future<Integer> future = fixedPool.submit(() -> {
            int sum = 0;
            for (int i = 1; i <= 100; i++) {
                sum += i;
            }
            return sum;
        });
        
        try {
            Integer result = future.get();
            System.out.println("è®¡ç®—ç»“æœï¼š" + result);
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
        
        // å®šæ—¶ä»»åŠ¡ â­â­â­â­
        scheduledPool.schedule(() -> {
            System.out.println("3ç§’åæ‰§è¡Œçš„ä»»åŠ¡");
        }, 3, TimeUnit.SECONDS);
        
        // å‘¨æœŸæ€§ä»»åŠ¡ â­â­â­â­
        scheduledPool.scheduleAtFixedRate(() -> {
            System.out.println("æ¯2ç§’æ‰§è¡Œä¸€æ¬¡ï¼š" + 
                System.currentTimeMillis());
        }, 0, 2, TimeUnit.SECONDS);
        
        // å…³é—­çº¿ç¨‹æ±  â­â­â­â­â­
        // fixedPool.shutdown();  // ç­‰å¾…ä»»åŠ¡å®Œæˆåå…³é—­
        // fixedPool.shutdownNow();  // ç«‹å³å…³é—­
    }
}
```

### è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼ˆæ¨èï¼‰â­â­â­â­â­

```java
import java.util.concurrent.*;

public class CustomThreadPool {
    public static void main(String[] args) {
        /**
         * è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼ˆé˜¿é‡Œå·´å·´è§„èŒƒæ¨èï¼‰ â­â­â­â­â­
         * å‚æ•°è¯´æ˜ï¼š
         * corePoolSize: æ ¸å¿ƒçº¿ç¨‹æ•°
         * maximumPoolSize: æœ€å¤§çº¿ç¨‹æ•°
         * keepAliveTime: ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
         * unit: æ—¶é—´å•ä½
         * workQueue: ä»»åŠ¡é˜Ÿåˆ—
         * threadFactory: çº¿ç¨‹å·¥å‚
         * handler: æ‹’ç»ç­–ç•¥
         */
        ThreadPoolExecutor executor = new ThreadPoolExecutor(
            5,                          // æ ¸å¿ƒçº¿ç¨‹æ•°
            10,                         // æœ€å¤§çº¿ç¨‹æ•°
            60,                         // ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
            TimeUnit.SECONDS,           // æ—¶é—´å•ä½
            new ArrayBlockingQueue<>(100),  // ä»»åŠ¡é˜Ÿåˆ—
            Executors.defaultThreadFactory(),  // çº¿ç¨‹å·¥å‚
            new ThreadPoolExecutor.CallerRunsPolicy()  // æ‹’ç»ç­–ç•¥
        );
        
        // æäº¤ä»»åŠ¡
        for (int i = 1; i <= 20; i++) {
            final int taskId = i;
            executor.execute(() -> {
                System.out.println("ä»»åŠ¡" + taskId + " æ‰§è¡Œä¸­...");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            });
        }
        
        // ç›‘æ§çº¿ç¨‹æ± çŠ¶æ€ â­â­â­â­
        System.out.println("æ ¸å¿ƒçº¿ç¨‹æ•°ï¼š" + executor.getCorePoolSize());
        System.out.println("æœ€å¤§çº¿ç¨‹æ•°ï¼š" + executor.getMaximumPoolSize());
        System.out.println("å½“å‰çº¿ç¨‹æ•°ï¼š" + executor.getPoolSize());
        System.out.println("æ´»åŠ¨çº¿ç¨‹æ•°ï¼š" + executor.getActiveCount());
        System.out.println("ä»»åŠ¡æ€»æ•°ï¼š" + executor.getTaskCount());
        System.out.println("å®Œæˆä»»åŠ¡æ•°ï¼š" + executor.getCompletedTaskCount());
        
        // å…³é—­çº¿ç¨‹æ± 
        executor.shutdown();
    }
}
```

## 6. å¹¶å‘å·¥å…·ç±» â­â­â­â­â­

### CountDownLatchï¼ˆå€’è®¡æ—¶å™¨ï¼‰â­â­â­â­

```java
import java.util.concurrent.CountDownLatch;

public class CountDownLatchDemo {
    public static void main(String[] args) throws InterruptedException {
        int playerCount = 5;
        CountDownLatch latch = new CountDownLatch(playerCount);
        
        // 5ä¸ªç©å®¶å‡†å¤‡
        for (int i = 1; i <= playerCount; i++) {
            final int playerId = i;
            new Thread(() -> {
                System.out.println("ç©å®¶" + playerId + "å‡†å¤‡ä¸­...");
                try {
                    Thread.sleep((long) (Math.random() * 3000));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("ç©å®¶" + playerId + "å·²å‡†å¤‡");
                latch.countDown();  // è®¡æ•°å‡1
            }).start();
        }
        
        System.out.println("ç­‰å¾…æ‰€æœ‰ç©å®¶å‡†å¤‡...");
        latch.await();  // ç­‰å¾…è®¡æ•°å˜ä¸º0
        System.out.println("æ‰€æœ‰ç©å®¶å‡†å¤‡å®Œæ¯•ï¼Œæ¸¸æˆå¼€å§‹ï¼");
    }
}
```

### CyclicBarrierï¼ˆå¾ªç¯å±éšœï¼‰â­â­â­â­

```java
import java.util.concurrent.CyclicBarrier;

public class CyclicBarrierDemo {
    public static void main(String[] args) {
        int parties = 3;
        
        CyclicBarrier barrier = new CyclicBarrier(parties, () -> {
            System.out.println("æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾å±éšœï¼Œå¼€å§‹ä¸‹ä¸€é˜¶æ®µï¼\n");
        });
        
        for (int i = 1; i <= parties; i++) {
            final int id = i;
            new Thread(() -> {
                try {
                    System.out.println("çº¿ç¨‹" + id + "å®Œæˆé˜¶æ®µ1");
                    barrier.await();  // ç­‰å¾…å…¶ä»–çº¿ç¨‹
                    
                    System.out.println("çº¿ç¨‹" + id + "å®Œæˆé˜¶æ®µ2");
                    barrier.await();
                    
                    System.out.println("çº¿ç¨‹" + id + "å…¨éƒ¨å®Œæˆ");
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }).start();
        }
    }
}
```

### Semaphoreï¼ˆä¿¡å·é‡ï¼‰â­â­â­â­

```java
import java.util.concurrent.Semaphore;

public class SemaphoreDemo {
    public static void main(String[] args) {
        // 3ä¸ªè®¸å¯è¯ï¼ˆ3ä¸ªåœè½¦ä½ï¼‰
        Semaphore semaphore = new Semaphore(3);
        
        // 10è¾†è½¦
        for (int i = 1; i <= 10; i++) {
            final int carId = i;
            new Thread(() -> {
                try {
                    System.out.println("è½¦" + carId + "åˆ°è¾¾åœè½¦åœº");
                    semaphore.acquire();  // è·å–è®¸å¯
                    System.out.println("è½¦" + carId + "è¿›å…¥åœè½¦ä½");
                    Thread.sleep(2000);  // åœè½¦2ç§’
                    System.out.println("è½¦" + carId + "ç¦»å¼€åœè½¦ä½");
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    semaphore.release();  // é‡Šæ”¾è®¸å¯
                }
            }).start();
        }
    }
}
```

## ğŸ’¡ é‡ç‚¹æ€»ç»“

### çº¿ç¨‹åˆ›å»ºæ–¹å¼å¯¹æ¯” â­â­â­â­â­

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| ç»§æ‰¿Thread | ç®€å•ç›´è§‚ | å•ç»§æ‰¿é™åˆ¶ | â­â­â­ |
| å®ç°Runnable | é¿å…å•ç»§æ‰¿ï¼Œä»£ç å¤ç”¨ | æ— è¿”å›å€¼ | â­â­â­â­â­ |
| å®ç°Callable | æœ‰è¿”å›å€¼ | ç¨å¤æ‚ | â­â­â­â­â­ |
| Lambda | ç®€æ´ | - | â­â­â­â­â­ |
| çº¿ç¨‹æ±  | èµ„æºå¤ç”¨ï¼Œæ€§èƒ½å¥½ | - | â­â­â­â­â­ |

### åŒæ­¥æ–¹å¼å¯¹æ¯” â­â­â­â­â­

| æ–¹å¼ | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| synchronized | ç®€å•ï¼Œè‡ªåŠ¨é‡Šæ”¾é” | ç®€å•åŒæ­¥ |
| Lock | çµæ´»ï¼ŒåŠŸèƒ½å¼ºå¤§ | å¤æ‚åŒæ­¥ â­â­â­â­â­ |
| volatile | è½»é‡çº§ï¼Œå¯è§æ€§ | æ ‡å¿—ä½ |
| Atomicç±» | åŸå­æ“ä½œ | è®¡æ•°å™¨ |

### æœ€ä½³å®è·µ â­â­â­â­â­

1. **ä¼˜å…ˆä½¿ç”¨çº¿ç¨‹æ± ** - é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯çº¿ç¨‹
2. **ä½¿ç”¨Lockä»£æ›¿synchronized** - æ›´çµæ´»å¯æ§
3. **é¿å…æ­»é”** - æŒ‰é¡ºåºè·å–é”
4. **çº¿ç¨‹å®‰å…¨çš„é›†åˆ** - ä½¿ç”¨ConcurrentHashMapç­‰
5. **åˆç†è®¾ç½®çº¿ç¨‹æ± å‚æ•°** - æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´

## ğŸ¯ ç»ƒä¹ å»ºè®®

1. å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹ä¸‹è½½å™¨
2. æ¨¡æ‹Ÿ12306æŠ¢ç¥¨ç³»ç»Ÿ
3. å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
4. è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ± ç›‘æ§ç³»ç»Ÿ

## ğŸ“š ä¸‹ä¸€æ­¥

å­¦ä¹ å®Œå¤šçº¿ç¨‹å¹¶å‘åï¼Œç»§ç»­å­¦ä¹  [IOä¸NIO](./IOä¸NIO.md)

