# Java面向对象编程（OOP）

## 📌 学习目标

- 理解面向对象的核心概念
- 掌握类和对象的使用
- 理解封装、继承、多态三大特性
- 熟练使用接口和抽象类

## ⭐ 核心概念

面向对象编程（OOP）的**三大特性**：
1. **封装（Encapsulation）** ⭐⭐⭐⭐⭐
2. **继承（Inheritance）** ⭐⭐⭐⭐⭐
3. **多态（Polymorphism）** ⭐⭐⭐⭐⭐

## 1. 类和对象 ⭐⭐⭐⭐⭐

### 类的定义

```java
/**
 * 学生类
 * 类是对象的模板，对象是类的实例
 */
public class Student {
    // 成员变量（属性）⭐⭐⭐⭐⭐
    private String name;      // 姓名
    private int age;          // 年龄
    private String studentId; // 学号
    
    // 构造方法 ⭐⭐⭐⭐⭐
    // 无参构造
    public Student() {
    }
    
    // 有参构造
    public Student(String name, int age, String studentId) {
        this.name = name;
        this.age = age;
        this.studentId = studentId;
    }
    
    // 成员方法（行为）⭐⭐⭐⭐⭐
    public void study() {
        System.out.println(name + "正在学习...");
    }
    
    public void introduce() {
        System.out.println("我是" + name + "，今年" + age + "岁，学号：" + studentId);
    }
    
    // Getter和Setter方法 ⭐⭐⭐⭐⭐
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
    
    public int getAge() {
        return age;
    }
    
    public void setAge(int age) {
        if (age > 0 && age < 150) {  // 数据验证
            this.age = age;
        }
    }
    
    public String getStudentId() {
        return studentId;
    }
    
    public void setStudentId(String studentId) {
        this.studentId = studentId;
    }
}
```

### 对象的创建和使用

```java
public class StudentTest {
    public static void main(String[] args) {
        // 创建对象 ⭐⭐⭐⭐⭐
        Student student1 = new Student();
        student1.setName("张三");
        student1.setAge(20);
        student1.setStudentId("2024001");
        
        // 使用有参构造创建对象
        Student student2 = new Student("李四", 21, "2024002");
        
        // 调用对象方法
        student1.introduce();
        student1.study();
        
        student2.introduce();
        student2.study();
    }
}
```

## 2. 封装（Encapsulation） ⭐⭐⭐⭐⭐

### 访问修饰符

```java
public class AccessModifierDemo {
    public int publicVar = 1;        // 公共：任何地方都可访问 ⭐⭐⭐⭐⭐
    protected int protectedVar = 2;  // 受保护：同包+子类可访问 ⭐⭐⭐⭐
    int defaultVar = 3;              // 默认：同包可访问 ⭐⭐⭐
    private int privateVar = 4;      // 私有：仅本类可访问 ⭐⭐⭐⭐⭐
    
    public void showVars() {
        // 类内部可以访问所有成员
        System.out.println(publicVar);
        System.out.println(protectedVar);
        System.out.println(defaultVar);
        System.out.println(privateVar);
    }
}
```

### 封装示例

```java
/**
 * 银行账户类 - 封装示例 ⭐⭐⭐⭐⭐
 */
public class BankAccount {
    // 私有属性，外部无法直接访问
    private String accountNumber;
    private String owner;
    private double balance;
    
    public BankAccount(String accountNumber, String owner, double initialBalance) {
        this.accountNumber = accountNumber;
        this.owner = owner;
        this.balance = initialBalance;
    }
    
    // 存款方法
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("存款成功！当前余额：" + balance);
        } else {
            System.out.println("存款金额必须大于0");
        }
    }
    
    // 取款方法
    public boolean withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println("取款成功！当前余额：" + balance);
            return true;
        } else {
            System.out.println("余额不足或金额无效");
            return false;
        }
    }
    
    // 查询余额
    public double getBalance() {
        return balance;
    }
    
    public String getOwner() {
        return owner;
    }
    
    // 账号只读，不提供setter
    public String getAccountNumber() {
        return accountNumber;
    }
}
```

## 3. 继承（Inheritance） ⭐⭐⭐⭐⭐

### 基本继承

```java
/**
 * 父类：人
 */
public class Person {
    protected String name;
    protected int age;
    
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
    
    public void eat() {
        System.out.println(name + "在吃饭");
    }
    
    public void sleep() {
        System.out.println(name + "在睡觉");
    }
    
    public void introduce() {
        System.out.println("我是" + name + "，" + age + "岁");
    }
}

/**
 * 子类：学生（继承Person） ⭐⭐⭐⭐⭐
 */
public class StudentExtends extends Person {
    private String school;
    private String major;
    
    // 子类构造方法
    public StudentExtends(String name, int age, String school, String major) {
        super(name, age);  // 调用父类构造方法 ⭐⭐⭐⭐⭐
        this.school = school;
        this.major = major;
    }
    
    // 子类特有方法
    public void study() {
        System.out.println(name + "在" + school + "学习" + major);
    }
    
    // 方法重写 ⭐⭐⭐⭐⭐
    @Override
    public void introduce() {
        super.introduce();  // 调用父类方法
        System.out.println("我在" + school + "学习" + major);
    }
}

/**
 * 子类：教师（继承Person）
 */
public class Teacher extends Person {
    private String subject;
    private double salary;
    
    public Teacher(String name, int age, String subject, double salary) {
        super(name, age);
        this.subject = subject;
        this.salary = salary;
    }
    
    public void teach() {
        System.out.println(name + "正在教" + subject);
    }
    
    @Override
    public void introduce() {
        super.introduce();
        System.out.println("我教" + subject + "，工资：" + salary);
    }
}
```

### 继承测试

```java
public class InheritanceTest {
    public static void main(String[] args) {
        StudentExtends student = new StudentExtends("王五", 20, "清华大学", "计算机科学");
        student.eat();        // 继承自Person
        student.sleep();      // 继承自Person
        student.study();      // 自己的方法
        student.introduce();  // 重写的方法
        
        System.out.println("---");
        
        Teacher teacher = new Teacher("赵老师", 35, "数学", 8000);
        teacher.eat();
        teacher.teach();
        teacher.introduce();
    }
}
```

## 4. 多态（Polymorphism） ⭐⭐⭐⭐⭐

### 多态示例

```java
/**
 * 多态演示 - 同一行为，不同表现
 */
public class PolymorphismDemo {
    public static void main(String[] args) {
        // 多态：父类引用指向子类对象 ⭐⭐⭐⭐⭐
        Person p1 = new StudentExtends("张三", 20, "北京大学", "软件工程");
        Person p2 = new Teacher("李老师", 40, "英语", 9000);
        
        // 调用重写的方法，展现不同行为
        p1.introduce();  // 调用Student的introduce
        System.out.println("---");
        p2.introduce();  // 调用Teacher的introduce
        
        // 多态的好处：统一处理
        Person[] people = {
            new StudentExtends("小明", 19, "复旦大学", "物理"),
            new Teacher("王老师", 45, "化学", 10000),
            new StudentExtends("小红", 21, "上海交大", "生物"),
        };
        
        System.out.println("\n===批量处理===");
        for (Person person : people) {
            person.introduce();
            System.out.println("---");
        }
        
        // 类型转换 ⭐⭐⭐⭐
        if (p1 instanceof StudentExtends) {
            StudentExtends student = (StudentExtends) p1;  // 向下转型
            student.study();  // 现在可以调用子类特有方法
        }
        
        // Java 16+ 模式匹配（推荐） ⭐⭐⭐⭐⭐
        if (p2 instanceof Teacher t) {  // 自动转型
            t.teach();
        }
    }
}
```

## 5. 抽象类（Abstract Class） ⭐⭐⭐⭐⭐

```java
/**
 * 抽象类：形状
 * 抽象类不能实例化，只能被继承
 */
public abstract class Shape {
    protected String color;
    
    public Shape(String color) {
        this.color = color;
    }
    
    // 抽象方法：没有方法体，子类必须实现 ⭐⭐⭐⭐⭐
    public abstract double getArea();
    public abstract double getPerimeter();
    
    // 普通方法：可以有实现
    public void display() {
        System.out.println("这是一个" + color + "的图形");
        System.out.println("面积：" + getArea());
        System.out.println("周长：" + getPerimeter());
    }
}

/**
 * 圆形类
 */
public class Circle extends Shape {
    private double radius;
    
    public Circle(String color, double radius) {
        super(color);
        this.radius = radius;
    }
    
    @Override
    public double getArea() {
        return Math.PI * radius * radius;
    }
    
    @Override
    public double getPerimeter() {
        return 2 * Math.PI * radius;
    }
}

/**
 * 矩形类
 */
public class Rectangle extends Shape {
    private double width;
    private double height;
    
    public Rectangle(String color, double width, double height) {
        super(color);
        this.width = width;
        this.height = height;
    }
    
    @Override
    public double getArea() {
        return width * height;
    }
    
    @Override
    public double getPerimeter() {
        return 2 * (width + height);
    }
}
```

## 6. 接口（Interface） ⭐⭐⭐⭐⭐

```java
/**
 * 接口：可飞行的
 * 接口定义规范，实现类提供具体实现
 */
public interface Flyable {
    // 接口中的变量默认是 public static final
    int MAX_HEIGHT = 10000;
    
    // 抽象方法（默认public abstract） ⭐⭐⭐⭐⭐
    void fly();
    void land();
    
    // 默认方法（Java 8+） ⭐⭐⭐⭐
    default void prepare() {
        System.out.println("准备起飞...");
    }
    
    // 静态方法（Java 8+） ⭐⭐⭐
    static void checkWeather() {
        System.out.println("检查天气状况");
    }
}

/**
 * 接口：可游泳的
 */
public interface Swimmable {
    void swim();
}

/**
 * 鸟类 - 实现飞行接口
 */
public class Bird implements Flyable {
    private String name;
    
    public Bird(String name) {
        this.name = name;
    }
    
    @Override
    public void fly() {
        System.out.println(name + "在天空中飞翔");
    }
    
    @Override
    public void land() {
        System.out.println(name + "降落到地面");
    }
}

/**
 * 鸭子 - 实现多个接口 ⭐⭐⭐⭐⭐
 */
public class Duck implements Flyable, Swimmable {
    private String name;
    
    public Duck(String name) {
        this.name = name;
    }
    
    @Override
    public void fly() {
        System.out.println(name + "笨拙地飞行");
    }
    
    @Override
    public void land() {
        System.out.println(name + "降落");
    }
    
    @Override
    public void swim() {
        System.out.println(name + "在水中游泳");
    }
}

/**
 * 接口测试
 */
public class InterfaceTest {
    public static void main(String[] args) {
        Bird bird = new Bird("老鹰");
        bird.prepare();  // 默认方法
        bird.fly();
        bird.land();
        
        System.out.println("---");
        
        Duck duck = new Duck("唐老鸭");
        duck.prepare();
        duck.fly();
        duck.swim();
        
        System.out.println("---");
        
        // 接口多态 ⭐⭐⭐⭐⭐
        Flyable flyable = new Duck("小黄鸭");
        flyable.fly();
        
        Flyable.checkWeather();  // 调用静态方法
    }
}
```

## 7. 重要关键字

### final关键字 ⭐⭐⭐⭐⭐

```java
public class FinalDemo {
    // final变量：常量，不可修改
    public static final double PI = 3.14159;
    
    // final方法：不能被重写
    public final void calculate() {
        System.out.println("这个方法不能被重写");
    }
}

// final类：不能被继承
public final class FinalClass {
    // 例如：String、Integer等
}
```

### static关键字 ⭐⭐⭐⭐⭐

```java
public class StaticDemo {
    // 静态变量（类变量）：所有对象共享
    private static int count = 0;
    
    // 实例变量
    private int id;
    
    public StaticDemo() {
        count++;  // 每创建一个对象，计数加1
        this.id = count;
    }
    
    // 静态方法：可以直接通过类名调用
    public static int getCount() {
        return count;
    }
    
    // 静态代码块：类加载时执行一次
    static {
        System.out.println("StaticDemo类被加载");
    }
    
    public void showInfo() {
        System.out.println("我是第" + id + "个对象，总共创建了" + count + "个对象");
    }
    
    public static void main(String[] args) {
        System.out.println("当前对象数：" + StaticDemo.getCount());
        
        StaticDemo obj1 = new StaticDemo();
        StaticDemo obj2 = new StaticDemo();
        StaticDemo obj3 = new StaticDemo();
        
        obj1.showInfo();
        obj2.showInfo();
        obj3.showInfo();
        
        System.out.println("总对象数：" + StaticDemo.getCount());
    }
}
```

## 💡 重点总结

### 抽象类 vs 接口 ⭐⭐⭐⭐⭐

| 特性 | 抽象类 | 接口 |
|------|--------|------|
| 关键字 | abstract class | interface |
| 继承/实现 | extends（单继承） | implements（多实现） |
| 方法 | 可以有抽象和普通方法 | 抽象方法+默认方法+静态方法 |
| 变量 | 可以有各种变量 | 只能有常量（public static final） |
| 构造方法 | 可以有 | 不能有 |
| 使用场景 | "是什么"的关系 | "能做什么"的关系 |

### 设计建议 ⭐⭐⭐⭐⭐

1. **优先使用接口**：Java 8+接口功能已经很强大
2. **合理使用继承**：不要为了继承而继承
3. **多用组合**：组合优于继承
4. **面向接口编程**：依赖抽象而非具体实现

## 🎯 练习建议

1. 设计一个动物系统（继承+多态）
2. 实现一个图形计算器（抽象类+接口）
3. 设计一个交通工具体系（多态应用）
4. 实现一个简单的员工管理系统

## 📚 下一步

学习完面向对象后，继续学习 [集合框架](./集合框架.md)

