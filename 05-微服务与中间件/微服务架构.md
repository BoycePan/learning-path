# å¾®æœåŠ¡æ¶æ„è®¾è®¡

## ğŸ“Œ å­¦ä¹ ç›®æ ‡

- ç†è§£å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒæ€æƒ³
- æŒæ¡å¾®æœåŠ¡è®¾è®¡åŸåˆ™
- äº†è§£å¸¸è§å¾®æœåŠ¡æ¨¡å¼
- ç†è§£æœåŠ¡æ²»ç†

## â­ å¾®æœåŠ¡æ ¸å¿ƒæ¦‚å¿µ

- **æœåŠ¡æ‹†åˆ†** â­â­â­â­â­
- **æœåŠ¡é€šä¿¡** â­â­â­â­â­
- **æœåŠ¡æ²»ç†** â­â­â­â­â­
- **åˆ†å¸ƒå¼äº‹åŠ¡** â­â­â­â­â­
- **é“¾è·¯è¿½è¸ª** â­â­â­â­â­

## 1. å¾®æœåŠ¡æ¶æ„æ¼”è¿›

### å•ä½“æ¶æ„ vs å¾®æœåŠ¡æ¶æ„

```
å•ä½“æ¶æ„ï¼š
â”œâ”€â”€ æ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªåº”ç”¨
â”œâ”€â”€ ä»£ç è€¦åˆåº¦é«˜
â”œâ”€â”€ éƒ¨ç½²ç®€å•
â””â”€â”€ éš¾ä»¥æ‰©å±•

å¾®æœåŠ¡æ¶æ„ï¼š
â”œâ”€â”€ åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹æœåŠ¡
â”œâ”€â”€ æœåŠ¡ç‹¬ç«‹éƒ¨ç½²
â”œâ”€â”€ æ˜“äºæ‰©å±•
â””â”€â”€ å¤æ‚åº¦é«˜
```

## 2. æœåŠ¡æ‹†åˆ†åŸåˆ™ â­â­â­â­â­

### æ‹†åˆ†ç­–ç•¥

```
1. æŒ‰ä¸šåŠ¡é¢†åŸŸæ‹†åˆ†ï¼ˆDDDï¼‰â­â­â­â­â­
   - ç”¨æˆ·æœåŠ¡
   - è®¢å•æœåŠ¡
   - å•†å“æœåŠ¡
   - æ”¯ä»˜æœåŠ¡

2. æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ† â­â­â­â­
   - è®¤è¯æœåŠ¡
   - é€šçŸ¥æœåŠ¡
   - æ–‡ä»¶æœåŠ¡

3. æŒ‰æ•°æ®æ‹†åˆ† â­â­â­â­
   - æ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ•°æ®åº“
   - é¿å…è·¨æœåŠ¡äº‹åŠ¡
```

> **æ¨èå­¦ä¹ **ï¼š[DDDé¢†åŸŸé©±åŠ¨è®¾è®¡](./DDDé¢†åŸŸé©±åŠ¨è®¾è®¡.md) - å¾®æœåŠ¡æ‹†åˆ†çš„æ ¸å¿ƒæ–¹æ³•è®º

## 3. æœåŠ¡é—´é€šä¿¡ â­â­â­â­â­

### åŒæ­¥é€šä¿¡ï¼ˆREST/RPCï¼‰

```java
/**
 * RESTful API â­â­â­â­â­
 */
@FeignClient("user-service")
public interface UserClient {
    @GetMapping("/users/{id}")
    User getById(@PathVariable Long id);
}

/**
 * gRPCï¼ˆé«˜æ€§èƒ½ï¼‰â­â­â­â­
 * - Protocol Buffers
 * - åŒå‘æµ
 * - æ€§èƒ½ä¼˜äºREST
 */
```

### å¼‚æ­¥é€šä¿¡ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰

```
ä¼˜ç‚¹ï¼š
- è§£è€¦
- å‰Šå³°å¡«è°·
- å¼‚æ­¥å¤„ç†

å¸¸ç”¨MQï¼š
- RocketMQ â­â­â­â­â­ï¼ˆæ¨èï¼‰
- Kafka â­â­â­â­â­
- RabbitMQ â­â­â­â­
```

## 4. åˆ†å¸ƒå¼äº‹åŠ¡ â­â­â­â­â­

### Seata ATæ¨¡å¼

```java
/**
 * è‡ªåŠ¨è¡¥å¿ â­â­â­â­â­
 */
@GlobalTransactional
public void createOrder(Order order) {
    // æœ¬åœ°äº‹åŠ¡
    orderMapper.insert(order);
    // è¿œç¨‹è°ƒç”¨
    stockClient.deduct(order.getProductId());
    accountClient.deduct(order.getUserId(), order.getAmount());
}
```

### Sagaæ¨¡å¼

```
é•¿äº‹åŠ¡åœºæ™¯ï¼š
è®¢å• â†’ åº“å­˜ â†’ è´¦æˆ· â†’ ç§¯åˆ†
  â†“      â†“      â†“      â†“
å›æ»š  å›æ»š   å›æ»š   å›æ»š
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æœåŠ¡ç²’åº¦é€‚ä¸­** - ä¸è¦è¿‡åº¦æ‹†åˆ†
2. **ç‹¬ç«‹æ•°æ®åº“** - é¿å…å…±äº«æ•°æ®åº“
3. **ç†”æ–­é™çº§** - é˜²æ­¢é›ªå´©
4. **é“¾è·¯è¿½è¸ª** - å¿«é€Ÿå®šä½é—®é¢˜
5. **æœåŠ¡ç›‘æ§** - å®æ—¶æŒæ¡çŠ¶æ€

## ğŸ“š ä¸‹ä¸€æ­¥

ç»§ç»­å­¦ä¹  [æ¶ˆæ¯é˜Ÿåˆ—](./æ¶ˆæ¯é˜Ÿåˆ—.md)
